<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Create and Register Conditions • cnd</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Create and Register Conditions">
<meta name="description" content="An interface for creating new condition generators objects. Generators are special functions that can be saved in registries and linked to other functions. Utilities for documenting your generators, and new conditions is provided for package development.">
<meta property="og:description" content="An interface for creating new condition generators objects. Generators are special functions that can be saved in registries and linked to other functions. Utilities for documenting your generators, and new conditions is provided for package development.">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">cnd</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0.9003</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/jmbarbone/cnd/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="cnd">cnd<a class="anchor" aria-label="anchor" href="#cnd"></a>
</h1></div>
<!-- badges: start -->

<p>The goal of <a href="https://jmbarbone.github.io/cnd/">cnd</a> is to provide easy, customized classes for your <code>conditions</code>.</p>
<p>This makes setting up custom conditions quick and more useful.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the current CRAN version of <a href="https://jmbarbone.github.io/cnd/">cnd</a> with one of:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"cnd"</span><span class="op">)</span></span>
<span><span class="fu">pak</span><span class="fu">::</span><span class="fu"><a href="https://pak.r-lib.org/reference/pak.html" class="external-link">pak</a></span><span class="op">(</span><span class="st">"cran/cnd@*release"</span><span class="op">)</span></span>
<span><span class="fu">pak</span><span class="fu">::</span><span class="fu"><a href="https://pak.r-lib.org/reference/pak.html" class="external-link">pak</a></span><span class="op">(</span><span class="st">"jmbarbone/cnd@*release"</span><span class="op">)</span></span></code></pre></div>
<p>You can install the development version of <a href="https://jmbarbone.github.io/cnd/">cnd</a> from <a href="https://github.com/" class="external-link">GitHub</a> with:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">pak</span><span class="fu">::</span><span class="fu"><a href="https://pak.r-lib.org/reference/pak.html" class="external-link">pak</a></span><span class="op">(</span><span class="st">"jmbarbone/cnd"</span><span class="op">)</span></span></code></pre></div>
<p>But is recommended to specify a pre-release tag, if available.</p>
</div>
<div class="section level2">
<h2 id="conditions-in-general">Conditions, in general<a class="anchor" aria-label="anchor" href="#conditions-in-general"></a>
</h2>
<p><code>conditions</code> are special objects that <strong>R</strong> will use for both signaling and messaging, primarily within the context of <code><a href="https://rdrr.io/r/base/stop.html" class="external-link">stop()</a></code>, <code><a href="https://rdrr.io/r/base/warning.html" class="external-link">warning()</a></code>, and <code><a href="https://rdrr.io/r/base/message.html" class="external-link">message()</a></code>.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/format.html" class="external-link">format</a></span><span class="op">(</span><span class="va">stop</span><span class="op">)</span><span class="op">[</span><span class="fl">7</span><span class="op">:</span><span class="fl">10</span><span class="op">]</span></span>
<span><span class="co">#&gt; [1] "        message &lt;- conditionMessage(cond)"               </span></span>
<span><span class="co">#&gt; [2] "        call &lt;- conditionCall(cond)"                     </span></span>
<span><span class="co">#&gt; [3] "        .Internal(.signalCondition(cond, message, call))"</span></span>
<span><span class="co">#&gt; [4] "        .Internal(.dfltStop(message, call))"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/format.html" class="external-link">format</a></span><span class="op">(</span><span class="va">warning</span><span class="op">)</span><span class="op">[</span><span class="fl">9</span><span class="op">:</span><span class="fl">14</span><span class="op">]</span></span>
<span><span class="co">#&gt; [1] "        message &lt;- conditionMessage(cond)"                   </span></span>
<span><span class="co">#&gt; [2] "        call &lt;- conditionCall(cond)"                         </span></span>
<span><span class="co">#&gt; [3] "        withRestarts({"                                      </span></span>
<span><span class="co">#&gt; [4] "            .Internal(.signalCondition(cond, message, call))"</span></span>
<span><span class="co">#&gt; [5] "            .Internal(.dfltWarn(message, call))"             </span></span>
<span><span class="co">#&gt; [6] "        }, muffleWarning = function() NULL)"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/format.html" class="external-link">format</a></span><span class="op">(</span><span class="va">message</span><span class="op">)</span><span class="op">[</span><span class="fl">13</span><span class="op">:</span><span class="fl">19</span><span class="op">]</span></span>
<span><span class="co">#&gt; [1] "    defaultHandler &lt;- function(c) {"                          </span></span>
<span><span class="co">#&gt; [2] "        cat(conditionMessage(c), file = stderr(), sep = \"\")"</span></span>
<span><span class="co">#&gt; [3] "    }"                                                        </span></span>
<span><span class="co">#&gt; [4] "    withRestarts({"                                           </span></span>
<span><span class="co">#&gt; [5] "        signalCondition(cond)"                                </span></span>
<span><span class="co">#&gt; [6] "        defaultHandler(cond)"                                 </span></span>
<span><span class="co">#&gt; [7] "    }, muffleMessage = function() NULL)"</span></span></code></pre></div>
<p>All functions accept a <code>condition</code> object as their first argument, which contains both the classes that will be signaled and a message that will be sent to the <code><a href="https://rdrr.io/r/base/showConnections.html" class="external-link">stderr()</a></code>. You’ll notice, too, that <code><a href="https://rdrr.io/r/base/warning.html" class="external-link">warning()</a></code> and <code><a href="https://rdrr.io/r/base/message.html" class="external-link">message()</a></code> call <code><a href="https://rdrr.io/r/base/conditions.html" class="external-link">withRestarts()</a></code>, which contain <code><a href="https://rdrr.io/r/base/conditions.html" class="external-link">signalCondition()</a></code> call. By default, these three functions create <code>condition</code> objects with an extra class of <code>"error"</code>, <code>"warning"</code>, or <code>"message"</code>, respectively. <a href="https://jmbarbone.github.io/cnd/">cnd</a> inserts itself into these processes by allowing users to define new condition objects to be signaled and with greater control over messaging.</p>
</div>
<div class="section level2">
<h2 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h2>
<p>The workhorse of <a href="https://jmbarbone.github.io/cnd/">cnd</a> is <code><a href="reference/condition.html">condition()</a></code>, which is a special function of class <code><a href="reference/condition.html">cnd::condition_progenitor</a></code>, which returns other special functions of class <code><a href="reference/condition.html">cnd::condition_generator</a></code>. The <code><a href="reference/condition.html">cnd::condition_generator</a></code> objects return <code>condition</code>s.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://jmbarbone.github.io/cnd/">cnd</a></span><span class="op">)</span></span>
<span><span class="va">condition</span></span>
<span><span class="co">#&gt; cnd::condition_progenitor</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; generator</span></span>
<span><span class="co">#&gt;   $ class    : &lt;symbol&gt; </span></span>
<span><span class="co">#&gt;   $ message  : NULL</span></span>
<span><span class="co">#&gt;   $ type     : &lt;language&gt; c("condition", "message", "warning", "error")</span></span>
<span><span class="co">#&gt;   $ package  : &lt;language&gt; get_package()</span></span>
<span><span class="co">#&gt;   $ exports  : NULL</span></span>
<span><span class="co">#&gt;   $ help     : NULL</span></span>
<span><span class="co">#&gt;   $ registry : &lt;symbol&gt; package</span></span>
<span><span class="co">#&gt;   $ register : &lt;language&gt; !is.null(registry)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; condition(s)</span></span>
<span><span class="co">#&gt; cnd:as_character_cnd_error/error</span></span>
<span><span class="co">#&gt; cnd:condition_message_generator/error</span></span>
<span><span class="co">#&gt; cnd:condition_overwrite/warning</span></span>
<span><span class="co">#&gt; cnd:invalid_condition/error</span></span>
<span><span class="co">#&gt; cnd:invalid_condition_message/error</span></span>
<span><span class="co">#&gt; cnd:match_arg/error</span></span>
<span><span class="co">#&gt; cnd:no_package_exports/warning</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; For a list of conditions: `cnd::conditions()`</span></span></code></pre></div>
<blockquote>
<p>Note: <code>condition</code> is of mode “function” but does not retain “function” as a class. <code>condition</code> also has several conditions which can be signaled directly or indirectly.</p>
</blockquote>
<p>Use <code><a href="reference/condition.html">condition()</a></code> to create a <em>generator</em>, then use that <em>generator</em> within your functions:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># cnd::condition_generator</span></span>
<span><span class="va">bad_value</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/condition.html">condition</a></span><span class="op">(</span></span>
<span>  <span class="st">"bad_value"</span>,</span>
<span>  message <span class="op">=</span> <span class="st">"Value has to be better"</span>,</span>
<span>  type <span class="op">=</span> <span class="st">"error"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">bad_value</span></span>
<span><span class="co">#&gt; cnd::condition_generator</span></span>
<span><span class="co">#&gt; bad_value/error</span></span>
<span></span>
<span><span class="co"># condition</span></span>
<span><span class="fu">bad_value</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; bad_value/error</span></span>
<span><span class="co">#&gt; (bad_value/cnd::condition/error/condition)</span></span>
<span><span class="co">#&gt; Value has to be better</span></span>
<span></span>
<span><span class="va">foo</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="va">x</span> <span class="op">&lt;</span> <span class="fl">0</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="kw"><a href="https://rdrr.io/r/base/stop.html" class="external-link">stop</a></span><span class="op">(</span><span class="fu">bad_value</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span>  <span class="va">x</span></span>
<span><span class="op">}</span></span>
<span></span>
<span></span>
<span><span class="fu">foo</span><span class="op">(</span><span class="op">-</span><span class="fl">1</span><span class="op">)</span></span>
<span><span class="co">#&gt; Error in foo(): &lt;bad_value&gt;</span></span>
<span><span class="co">#&gt; Value has to be better</span></span></code></pre></div>
<p>The resulting <code><a href="reference/condition.html">cnd::condition_generator</a></code> object can also take parameters that are used in creating a custom message.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bad_value2</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/condition.html">condition</a></span><span class="op">(</span></span>
<span>  <span class="st">"bad_value2"</span>,</span>
<span>  message <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span><span class="st">"`x` must be `&gt;=0`. A value of `%s` is no good"</span>, <span class="fu"><a href="https://rdrr.io/r/base/format.html" class="external-link">format</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">}</span>,</span>
<span>  type <span class="op">=</span> <span class="st">"error"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># a 'generator' is also printed, with formals</span></span>
<span><span class="va">bad_value2</span></span>
<span><span class="co">#&gt; cnd::condition_generator</span></span>
<span><span class="co">#&gt; bad_value2/error </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; generator</span></span>
<span><span class="co">#&gt;   $ x : &lt;symbol&gt;</span></span>
<span></span>
<span><span class="co"># pass a value to the args to generate the condition message</span></span>
<span><span class="fu">bad_value2</span><span class="op">(</span><span class="fl">0</span><span class="op">)</span></span>
<span><span class="co">#&gt; bad_value2/error</span></span>
<span><span class="co">#&gt; (bad_value2/cnd::condition/error/condition)</span></span>
<span><span class="co">#&gt; `x` must be `&gt;=0`. A value of `0` is no good</span></span>
<span><span class="fu">bad_value2</span><span class="op">(</span><span class="op">-</span><span class="fl">1</span><span class="op">)</span></span>
<span><span class="co">#&gt; bad_value2/error</span></span>
<span><span class="co">#&gt; (bad_value2/cnd::condition/error/condition)</span></span>
<span><span class="co">#&gt; `x` must be `&gt;=0`. A value of `-1` is no good</span></span>
<span></span>
<span><span class="co"># note: this does not provide any tests, so you may produce non-nonsensical messages</span></span>
<span><span class="fu">bad_value2</span><span class="op">(</span><span class="fl">10</span><span class="op">)</span></span>
<span><span class="co">#&gt; bad_value2/error</span></span>
<span><span class="co">#&gt; (bad_value2/cnd::condition/error/condition)</span></span>
<span><span class="co">#&gt; `x` must be `&gt;=0`. A value of `10` is no good</span></span>
<span></span>
<span></span>
<span><span class="co"># now when used in your function:</span></span>
<span><span class="va">foo</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="va">x</span> <span class="op">&lt;</span> <span class="fl">0</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="kw"><a href="https://rdrr.io/r/base/stop.html" class="external-link">stop</a></span><span class="op">(</span><span class="fu">bad_value2</span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span>  <span class="va">x</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu">foo</span><span class="op">(</span><span class="op">-</span><span class="fl">1.2</span><span class="op">)</span></span>
<span><span class="co">#&gt; Error in foo(): &lt;bad_value2&gt;</span></span>
<span><span class="co">#&gt; `x` must be `&gt;=0`. A value of `-1.2` is no good</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="your-package">Your package<a class="anchor" aria-label="anchor" href="#your-package"></a>
</h2>
<p>There are three things you can do to get the most out of <a href="https://jmbarbone.github.io/cnd/">cnd</a> within your package.</p>
<ul>
<li>Creating a <code>registry</code> within your package<br>
</li>
<li>Assigning a <code>"condition"</code> attribute to your functions<br>
</li>
<li>Documenting your conditions</li>
</ul>
<div class="section level3">
<h3 id="registry">Registry<a class="anchor" aria-label="anchor" href="#registry"></a>
</h3>
<p>A <code>registry</code> is a new environment that will store all of your conditions. This environment must exist within your package, an <a href="https://jmbarbone.github.io/cnd/">cnd</a> will be able to find this and use it to connect your conditions to your functions and to other outputs.</p>
<p>Simple add <code>cnd_registry()</code> to an <code>R/</code> script in your package. If you are going to save an store conditions as objects (recommended) then you should ensure that the <code>cnd_registry()</code> call is made before any conditions are created.</p>
<blockquote>
<p><strong>NOTE</strong> <code>cnd_registry()</code> is designed to use <code><a href="https://rdrr.io/r/base/assign.html" class="external-link">assign()</a></code> within your package environment. Please read the documentation to ensure the environment is not masked by other objects.</p>
</blockquote>
<blockquote>
<p><strong>NOTE</strong> By default, <code>condition(registry = )</code> will pick up on the <code>registry</code> object within your package when you create your conditions and functions are loaded. However, interactive use may not provide the same results. See the examples in <code><a href="reference/cnd_create_registry.html">cnd_create_registry()</a></code> for an example of how to create a new registry and assign conditions to the registry.</p>
</blockquote>
</div>
<div class="section level3">
<h3 id="assigning-conditions">Assigning conditions<a class="anchor" aria-label="anchor" href="#assigning-conditions"></a>
</h3>
<p><code><a href="reference/condition.html">condition()</a></code> has an argument for <code>exports</code>, which you can set to any function which you want to relate with any specific conditions.</p>
<p>If you add any functions to the <code>exports</code> option, <code>package</code> must be set. By default, <code>package</code> should be set to your development package, so you don’t need to explicitly assign it every time.</p>
<p>In your package, add <code><a href="reference/cnd_exports.html">cnd_exports()</a></code> to an <code>R/</code> script. This should be executed after all your conditions and their functions are created. This will add a new <code>"conditions"</code> attribute to your functions as well as a new <code>"cnd::conditioned_function"</code> class. The new class specifically updates the <code><a href="https://rdrr.io/r/base/print.html" class="external-link">print()</a></code> method to show the conditions assigned to the function.</p>
</div>
<div class="section level3">
<h3 id="documentation">Documentation<a class="anchor" aria-label="anchor" href="#documentation"></a>
</h3>
<p>When you’ve created your conditions and assigned them to your functions, you may also want to provide documentation. Or, rather, you should always provide documentation.</p>
<p><code><a href="reference/cnd_document.html">cnd_document()</a></code> will create a new <code>{package}-cnd-conditions.R</code> file for all conditions you have assigned to your package. Simply run the command when developing to generate a file listing all conditions. You can also include this after your call to <code><a href="reference/cnd_exports.html">cnd_exports()</a></code> to ensure that all conditions are documented. The file is written for <a href="https://roxygen2.r-lib.org/" class="external-link">roxygen2</a> to generate the <code>Rd</code> files for your package.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/cnd_document.html">cnd_document</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>If you want to include other information directly within your roxygen comments, you can use the <code><a href="reference/cnd_document.html">cnd_section()</a></code> function to grab all the conditions from a single functions and print out roxygen-friendly <em>section</em> information:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="fu"><a href="reference/cnd_document.html">cnd_section</a></span><span class="op">(</span><span class="va">cnd</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Conditions are generated through the [`{cnd}`][cnd::cnd-package] package.</span></span>
<span><span class="co">#&gt; The following conditions are associated with this function:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; \describe{</span></span>
<span><span class="co">#&gt;   </span></span>
<span><span class="co">#&gt;   \item{[`cnd:cond_cnd_class/error`][cnd-cnd-conditions]}{</span></span>
<span><span class="co">#&gt;     [cnd::cnd()] simple calls the appropriate function: [stop()], [warning()], or [message()] based on the `type` parameter from [cnd::condition()].</span></span>
<span><span class="co">#&gt;   }</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; }</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; For more conditions, see: [cnd-cnd-conditions]</span></span></code></pre></div>
<p>Typically, you may want to use this as such:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#' @section Conditions:</span></span>
<span><span class="co">#' `r cnd_section(my_function)`</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="retrieval">Retrieval<a class="anchor" aria-label="anchor" href="#retrieval"></a>
</h2>
<p>You can retrieve any <code>conditions</code> that are created with <code><a href="reference/condition.html">conditions()</a></code>. By default this will list all <code>conditions</code> loaded, but can be filtered by specific packages.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/condition.html">conditions</a></span><span class="op">(</span><span class="st">"cnd"</span>, type <span class="op">=</span> <span class="st">"warning"</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb11"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="co">#&gt; [[1]]</span></span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a><span class="co">#&gt; cnd::condition_generator</span></span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a><span class="co">#&gt; cnd:cnd_document_conditions/warning </span></span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb11-5"><a href="#cb11-5" tabindex="-1"></a><span class="co">#&gt; help</span></span>
<span id="cb11-6"><a href="#cb11-6" tabindex="-1"></a><span class="co">#&gt; Documentation will fail when no conditions are found.  You may be executing [cnd::cnd_document()] too early, before conditions have been registered.  You can try to find your conditions with [cnd::conditions()]. </span></span>
<span id="cb11-7"><a href="#cb11-7" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb11-8"><a href="#cb11-8" tabindex="-1"></a><span class="co">#&gt; exports</span></span>
<span id="cb11-9"><a href="#cb11-9" tabindex="-1"></a><span class="co">#&gt;   cnd::cnd_document()</span></span>
<span id="cb11-10"><a href="#cb11-10" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb11-11"><a href="#cb11-11" tabindex="-1"></a><span class="co">#&gt; [[2]]</span></span>
<span id="cb11-12"><a href="#cb11-12" tabindex="-1"></a><span class="co">#&gt; cnd::condition_generator</span></span>
<span id="cb11-13"><a href="#cb11-13" tabindex="-1"></a><span class="co">#&gt; cnd:condition_overwrite/warning </span></span>
<span id="cb11-14"><a href="#cb11-14" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb11-15"><a href="#cb11-15" tabindex="-1"></a><span class="co">#&gt; generator</span></span>
<span id="cb11-16"><a href="#cb11-16" tabindex="-1"></a><span class="co">#&gt;   $ old : &lt;symbol&gt; </span></span>
<span id="cb11-17"><a href="#cb11-17" tabindex="-1"></a><span class="co">#&gt;   $ new : &lt;symbol&gt; </span></span>
<span id="cb11-18"><a href="#cb11-18" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb11-19"><a href="#cb11-19" tabindex="-1"></a><span class="co">#&gt; help</span></span>
<span id="cb11-20"><a href="#cb11-20" tabindex="-1"></a><span class="co">#&gt; Defining a new condition with the same class and package as an existing condition will overwrite the previous definition.  It is recommended to either avoid this by fully defining your condition, or creating a new condition instead. </span></span>
<span id="cb11-21"><a href="#cb11-21" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb11-22"><a href="#cb11-22" tabindex="-1"></a><span class="co">#&gt; exports</span></span>
<span id="cb11-23"><a href="#cb11-23" tabindex="-1"></a><span class="co">#&gt;   cnd::condition()</span></span>
<span id="cb11-24"><a href="#cb11-24" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb11-25"><a href="#cb11-25" tabindex="-1"></a><span class="co">#&gt; [[3]]</span></span>
<span id="cb11-26"><a href="#cb11-26" tabindex="-1"></a><span class="co">#&gt; cnd::condition_generator</span></span>
<span id="cb11-27"><a href="#cb11-27" tabindex="-1"></a><span class="co">#&gt; cnd:conditions_dots/warning </span></span>
<span id="cb11-28"><a href="#cb11-28" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb11-29"><a href="#cb11-29" tabindex="-1"></a><span class="co">#&gt; help</span></span>
<span id="cb11-30"><a href="#cb11-30" tabindex="-1"></a><span class="co">#&gt; The `...` parameter in [cnd::conditions()] is meant for convenience.  Only a single argument is allowed.  Other parameters must be named  explicitly.  For example:  ```r # Instead of this conditions("class", "package") # "package" is ignored with a warning  # Do this conditions(class = "class", package = "package") ``` </span></span>
<span id="cb11-31"><a href="#cb11-31" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb11-32"><a href="#cb11-32" tabindex="-1"></a><span class="co">#&gt; exports</span></span>
<span id="cb11-33"><a href="#cb11-33" tabindex="-1"></a><span class="co">#&gt;   cnd::conditions()</span></span>
<span id="cb11-34"><a href="#cb11-34" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb11-35"><a href="#cb11-35" tabindex="-1"></a><span class="co">#&gt; [[4]]</span></span>
<span id="cb11-36"><a href="#cb11-36" tabindex="-1"></a><span class="co">#&gt; cnd::condition_generator</span></span>
<span id="cb11-37"><a href="#cb11-37" tabindex="-1"></a><span class="co">#&gt; cnd:no_package_exports/warning </span></span>
<span id="cb11-38"><a href="#cb11-38" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb11-39"><a href="#cb11-39" tabindex="-1"></a><span class="co">#&gt; help</span></span>
<span id="cb11-40"><a href="#cb11-40" tabindex="-1"></a><span class="co">#&gt; The `exports` parameter requires a `package` </span></span>
<span id="cb11-41"><a href="#cb11-41" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb11-42"><a href="#cb11-42" tabindex="-1"></a><span class="co">#&gt; exports</span></span>
<span id="cb11-43"><a href="#cb11-43" tabindex="-1"></a><span class="co">#&gt;   cnd::condition()</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="cnd-1">
<code>cnd()</code><a class="anchor" aria-label="anchor" href="#cnd-1"></a>
</h2>
<p><code><a href="reference/condition.html">cnd()</a></code> is a special function which will use the appropriate signaling and handling function based on type of <code>condition</code> provided. When the condition’s type is <code>"error"</code> or <code>"warning"</code>, <code><a href="reference/condition.html">cnd()</a></code> passes these directly through <code><a href="https://rdrr.io/r/base/stop.html" class="external-link">stop()</a></code> and <code><a href="https://rdrr.io/r/base/warning.html" class="external-link">warning()</a></code>, respectively. Both of these functions have <code><a href="https://rdrr.io/r/base/Internal.html" class="external-link">.Internal()</a></code> calls (i.e., <code>.dfltStop()</code> and <code>.dfltWarn()</code>), which makes would make them difficult to replicate. However, <code><a href="https://rdrr.io/r/base/message.html" class="external-link">message()</a></code> does not, and thus an equivalent wrapper is internally used which also controls for formatting:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">foo_call</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="reference/condition.html">condition</a></span><span class="op">(</span><span class="st">"foo_condition"</span>, <span class="st">"two\nlines"</span>, type <span class="op">=</span> <span class="st">"message"</span><span class="op">)</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># provides a character(2) vector output:</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/conditions.html" class="external-link">conditionMessage</a></span><span class="op">(</span><span class="fu">foo_call</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "&lt;foo_condition&gt;\ntwo\nlines"</span></span></code></pre></div>
<p><code><a href="https://rdrr.io/r/base/message.html" class="external-link">message()</a></code> uses a handler which simply collapses the message vector into a single string. Because of this, the lines are not always neatly separated:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">message</a></span><span class="op">(</span><span class="fu">foo_call</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; &lt;foo_condition&gt;</span></span>
<span><span class="co">#&gt; two</span></span>
<span><span class="co">#&gt; lines</span></span></code></pre></div>
<p>By contrast, the handlers invoked in <code><a href="reference/condition.html">cnd()</a></code> will recognize each element as a separate line for the output. Also, the default is to provide more information about the call, in a different format:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/condition.html">cnd</a></span><span class="op">(</span><span class="fu">foo_call</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; &lt;foo_condition&gt;</span></span>
<span><span class="co">#&gt; two</span></span>
<span><span class="co">#&gt; lines</span></span></code></pre></div>
<p>To get the a simpler message, you can use the <code><a href="https://rdrr.io/r/base/options.html" class="external-link">options()</a></code> function to change the <code>cnd.message.format</code> option to <code>"simple"</code>.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/eval.html" class="external-link">local</a></span><span class="op">(</span><span class="op">{</span></span>
<span>  <span class="va">op</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>cnd.message.format <span class="op">=</span> <span class="st">"simple"</span>, cnd.call <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/on.exit.html" class="external-link">on.exit</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span><span class="va">op</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="reference/condition.html">cnd</a></span><span class="op">(</span><span class="fu">foo_call</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span><span class="op">)</span></span>
<span><span class="co">#&gt; &lt;foo_condition&gt;</span></span>
<span><span class="co">#&gt; two</span></span>
<span><span class="co">#&gt; lines</span></span></code></pre></div>
<blockquote>
<p>Currently <code><a href="https://rdrr.io/r/base/message.html" class="external-link">message()</a></code> and therefore <code><a href="reference/condition.html">cnd()</a></code> send message conditions to the <code><a href="https://rdrr.io/r/base/showConnections.html" class="external-link">stderr()</a></code>, thus usually giving them an colored text.</p>
</blockquote>
<p>Another benefit in using <code>cnd(condition)</code> is being able to control for messages printed to the <code><a href="https://rdrr.io/r/base/showConnections.html" class="external-link">stdout()</a></code>. Using <code><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat()</a></code> can sometimes create noise that you’d rather suppress. Because <code><a href="reference/condition.html">cnd()</a></code> uses an internal handler for <code>message</code> and <code>condition</code> types, a condition is signaled with <code>singalCondition()</code>, which can then be caught with calling handlers, using a provided <code>"muffleCondition"</code> restart:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">con</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/condition.html">condition</a></span><span class="op">(</span><span class="st">"foo_condition"</span>, <span class="st">"Hello\nthere"</span>, type <span class="op">=</span> <span class="st">"condition"</span><span class="op">)</span></span>
<span><span class="va">my_fun</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="fu"><a href="reference/condition.html">cnd</a></span><span class="op">(</span><span class="fu">con</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu">my_fun</span><span class="op">(</span><span class="op">)</span> <span class="co"># note the classes inside (...)</span></span>
<span><span class="co">#&gt; foo_condition/condition</span></span>
<span><span class="co">#&gt; (foo_condition/cnd::condition/condition)</span></span>
<span><span class="co">#&gt; Hello</span></span>
<span><span class="co">#&gt; there</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/conditions.html" class="external-link">withCallingHandlers</a></span><span class="op">(</span></span>
<span>  <span class="fu">my_fun</span><span class="op">(</span><span class="op">)</span>, </span>
<span>  foo_condition <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">c</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/conditions.html" class="external-link">tryInvokeRestart</a></span><span class="op">(</span><span class="st">"muffleCondition"</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=cnd" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/jmbarbone/cnd/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/jmbarbone/cnd/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing cnd</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Jordan Mark Barbone <br><small class="roles"> Author, copyright holder, maintainer </small> <a href="https://orcid.org/0000-0001-9788-3628" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a>  </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/jmbarbone/cnd/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/jmbarbone/cnd/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
<li><a href="https://app.codecov.io/gh/jmbarbone/cnd" class="external-link"><img src="https://codecov.io/gh/jmbarbone/cnd/graph/badge.svg" alt="Codecov test coverage"></a></li>
<li><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental" class="external-link"><img src="https://img.shields.io/badge/lifecycle-experimental-orange.svg" alt="Lifecycle: experimental"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Jordan Mark Barbone.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
